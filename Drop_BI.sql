-- ============================== -- 
--				FOREIGN KEYS	          --
-- ============================== --

ALTER TABLE SARTEN_QUE_LADRA.Hechos_Pago DROP CONSTRAINT FK_Hechos_Pago_Localidad_Cliente;
ALTER TABLE SARTEN_QUE_LADRA.Hechos_Pago DROP CONSTRAINT FK_Hechos_Pago_Tiempo;
ALTER TABLE SARTEN_QUE_LADRA.Hechos_Pago DROP CONSTRAINT FK_Hechos_Pago_Medio_De_Pago;
ALTER TABLE SARTEN_QUE_LADRA.Hechos_Pago DROP CONSTRAINT FK_Hechos_Pago_Tipo_Medio_De_Pago;

ALTER TABLE SARTEN_QUE_LADRA.BI_HECHOS_ENVIO DROP CONSTRAINT FK_BI_HechosEnvio_LocCliente;
ALTER TABLE SARTEN_QUE_LADRA.BI_HECHOS_ENVIO DROP CONSTRAINT FK_BI_HechosEnvio_ProvinciaAlmacen;
ALTER TABLE SARTEN_QUE_LADRA.BI_HECHOS_ENVIO DROP CONSTRAINT FK_BI_HechosEnvio_Tiempo;
ALTER TABLE SARTEN_QUE_LADRA.BI_Localidad DROP CONSTRAINT FK_BI_Localidad_Provincia;

ALTER TABLE SARTEN_QUE_LADRA.BI_HECHOS_FACTURA DROP CONSTRAINT FK_BI_HECHOS_FACTURA_PROVINCIA;
ALTER TABLE SARTEN_QUE_LADRA.BI_HECHOS_FACTURA DROP CONSTRAINT FK_BI_HECHOS_FACTURA_Tiempo;
ALTER TABLE SARTEN_QUE_LADRA.BI_HECHOS_FACTURA DROP CONSTRAINT FK_BI_HECHOS_FACTURA_concepto;

-- ============================== -- 
--				TABLES	          --
-- ============================== --

SELECT * FROM sys.tables 
WHERE name LIKE 'BI%' OR name LIKE 'Hechos%';

DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_Tiempo;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_Localidad;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_Provincia;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_Medio_De_Pago;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_Tipo_Medio_De_Pago;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_Tipo_envio;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_CONCEPTO
  
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.Hechos_Pago;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_HECHOS_ENVIO;
DROP TABLE IF EXISTS SARTEN_QUE_LADRA.BI_HECHOS_FACTURA;

-- ============================== -- 
--			FUNCTIONS	          --
-- ============================== --

SELECT name, object_id, type, type_desc
FROM sys.objects
WHERE type IN ('TF', 'IF', 'FN') -- TF: Table-valued, IF: Inline Table-valued, FN: Scalar
ORDER BY name;

DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.BI_Select_Localidad_Cliente_Segun_Cantidad_De_Domicilios;
DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.BI_Select_Localidad_Cliente;
DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.BI_Cantidad_De_Domicilios;
DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.BI_Select_Tiempo;
DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.BI_Select_Provincia_Almacen;
DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.BI_Select_Provincia_Vendedor;
DROP FUNCTION IF EXISTS SARTEN_QUE_LADRA.ENVIADOS_A_TIEMPO

-- ============================== -- 
--			PROCEDURES	          --
-- ============================== --

SELECT name 
FROM sys.procedures
WHERE name LIKE 'BI%';

-- DROP DE TODAS LAS PROCEDURES
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Provincia;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Concepto;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Localidad;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Tiempo;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Medio_De_Pago;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Tipo_Medio_De_Pago;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Pago;
DROP PROCEDURE IF EXISTS SARTEN_QUE_LADRA.BI_Migrar_Hechos_Factura;

-- ============================== -- 
--				VIEWS	          --
-- ============================== --

DROP VIEW IF EXISTS SARTEN_QUE_LADRA.LOCALIDADES_MAYOR_IMPORTE_CUOTAS;


